<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expo Games WebSocket API æ–‡æª”</title>
    <link rel="stylesheet" href="/static/css/websocket-docs.css">
    <script src="/static/js/websocket-docs.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”Œ Expo Games WebSocket API</h1>
            <p>å³æ™‚é›™å‘é€šè¨Šå”è­°æ–‡æª”èˆ‡æ¸¬è©¦å·¥å…·</p>
        </div>

        <!-- é€£æ¥ç‹€æ…‹æŒ‡ç¤ºå™¨ -->
        <div class="endpoint-card">
            <div class="endpoint-header">
                <div>
                    <span class="status-indicator status-disconnected" id="connectionStatus"></span>
                    <strong>WebSocket é€£æ¥ç‹€æ…‹</strong>
                    <div class="endpoint-description">ç›®å‰é€£æ¥ç‹€æ…‹å’Œæ§åˆ¶</div>
                </div>
            </div>
            <div class="endpoint-content">
                <div class="test-section">
                    <h4>ğŸ”— é€£æ¥æ¸¬è©¦</h4>
                    <div class="input-group">
                        <label>WebSocket URL:</label>
                        <input type="text" id="wsUrl" value="" readonly>
                    </div>
                    <div class="test-controls">
                        <button class="btn btn-primary" id="connectBtn">é€£æ¥</button>
                        <button class="btn btn-danger" id="disconnectBtn">æ–·é–‹</button>
                        <button class="btn btn-success" id="clearLogBtn">æ¸…é™¤æ—¥èªŒ</button>
                    </div>
                    <div class="log-area" id="logArea">ç­‰å¾…é€£æ¥...\n</div>
                </div>
            </div>
        </div>

        <!-- æƒ…ç·’åˆ†æ WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/emotion</span>
                    <div class="endpoint-description">å³æ™‚æƒ…ç·’åˆ†æä¸²æµ</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>è™•ç†å³æ™‚æ”å½±æ©Ÿå½±åƒä¸²æµï¼Œé€²è¡Œæƒ…ç·’åˆ†æä¸¦è¿”å›çµæœã€‚æ”¯æ´å¿ƒè·³æ©Ÿåˆ¶å’Œè‡ªå‹•é‡é€£ã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¤ å®¢æˆ¶ç«¯ç™¼é€è¨Šæ¯</h3>

                    <div class="message-example">
                        <div class="message-type">å½±åƒå¹€è¨Šæ¯ (Frame Message)</div>
                        <pre>{
  "type": "frame",
  "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",
  "timestamp": 1640995200.123
}</pre>
                        <p><strong>èªªæ˜</strong>ï¼šæŒçºŒç™¼é€æ”å½±æ©Ÿå¹€é€²è¡Œå³æ™‚åˆ†æï¼Œå»ºè­° 5-10 FPS</p>
                    </div>

                    <div class="message-example">
                        <div class="message-type">å¿ƒè·³è¨Šæ¯ (Ping Message - å¯é¸)</div>
                        <pre>{
  "type": "ping",
  "timestamp": 1640995200.123
}</pre>
                        <p><strong>èªªæ˜</strong>ï¼šå¿ƒè·³ç‚ºå¯é¸åŠŸèƒ½ï¼Œå› ç‚ºæŒçºŒçš„å¹€æ•¸æ“šå·²èµ·åˆ°ä¿æ´»ä½œç”¨</p>
                    </div>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ æœå‹™å™¨å›æ‡‰è¨Šæ¯</h3>

                    <div class="message-example">
                        <div class="message-type">åˆ†æçµæœ (Result Message)</div>
                        <pre>{
  "type": "result",
  "emotion_zh": "é–‹å¿ƒ",
  "emotion_en": "happy",
  "emoji": "ğŸ˜Š",
  "confidence": 0.95,
  "timestamp": 1640995200.123,
  "frame_time": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">éŒ¯èª¤è¨Šæ¯ (Error Message)</div>
                        <pre>{
  "type": "error",
  "message": "å½±åƒåˆ†æéŒ¯èª¤: ç„¡æ³•æª¢æ¸¬åˆ°äººè‡‰",
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">å¿ƒè·³å›æ‡‰ (Pong Response)</div>
                        <pre>"pong"</pre>
                        <p><strong>èªªæ˜</strong>ï¼šæœå‹™ç«¯å›æ‡‰ç´”æ–‡æœ¬ "pong"ï¼Œä¸æ˜¯ JSON æ ¼å¼</p>
                    </div>
                </div>

                <div class="section">
                    <h3>ğŸ”Œ é€£æ¥ç®¡ç†</h3>
                    
                    <h4>é€£æ¥æ–¹å¼</h4>
                    <div class="code-block">// ç›´æ¥é€£æ¥ï¼Œç„¡éœ€ open è¨Šæ¯
const ws = new WebSocket('ws://localhost:8896/ws/emotion');

ws.onopen = () => {
    console.log('å·²é€£æ¥ï¼Œå¯ä»¥é–‹å§‹ç™¼é€å½±åƒå¹€');
    // ç„¡éœ€ç™¼é€ open è¨Šæ¯ï¼Œç›´æ¥ç™¼é€ frame
};
</div>

                    <h4>åœæ­¢æœƒè©±</h4>
                    <div class="code-block">// æ–¹æ³• 1: ç›´æ¥é—œé–‰é€£æ¥ï¼ˆæ¨è–¦ï¼‰
ws.close(1000, 'ç”¨æˆ¶ä¸»å‹•é—œé–‰');

// æ–¹æ³• 2: åœæ­¢ç™¼é€å¹€ï¼Œä¿æŒé€£æ¥
// åªè¦åœæ­¢ç™¼é€ frame è¨Šæ¯å³å¯ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„åœæ­¢è¨Šæ¯
clearInterval(frameInterval);
</div>

                    <h4>å¿ƒè·³æ©Ÿåˆ¶ï¼ˆå¯é¸ï¼‰</h4>
                    <div class="code-block">// å¦‚æœéœ€è¦é¡å¤–çš„å¿ƒè·³ä¿æ´»
setInterval(() => {
    if (ws.readyState === WebSocket.OPEN) {
        ws.send(JSON.stringify({ type: 'ping' }));
    }
}, 30000); // æ¯ 30 ç§’ä¸€æ¬¡
</div>
                </div>

                <div class="section">
                    <h3>âš™ï¸ æ•ˆèƒ½åƒæ•¸</h3>
                    <table class="table">
                        <tr><th>åƒæ•¸</th><th>å»ºè­°å€¼</th><th>èªªæ˜</th></tr>
                        <tr><td>å¹€ç‡</td><td>5-10 FPS</td><td>è¦–ç¶²è·¯å’Œè™•ç†èƒ½åŠ›è€Œå®š</td></tr>
                        <tr><td>å½±åƒè§£æåº¦</td><td>å‹•æ…‹é©æ‡‰</td><td>è‡ªå‹•é©æ‡‰æ”å½±æ©Ÿå¯¦éš›è§£æåº¦ (å¦‚ 1920x1080, 1280x720 ç­‰)</td></tr>
                        <tr><td>å£“ç¸®å“è³ª</td><td>0.8 JPEG</td><td>å¹³è¡¡æª”æ¡ˆå¤§å°å’Œå“è³ª</td></tr>
                        <tr><td>ç¶²è·¯å»¶é²</td><td>< 200ms</td><td>å»ºè­°å»¶é²ä¸Šé™</td></tr>
                    </table>
                </div>

                <div class="section">
                    <h3>ğŸ’» ä½¿ç”¨ç¯„ä¾‹</h3>
                    <div class="code-block">// JavaScript å‹•æ…‹è§£æåº¦å½±åƒä¸²æµç¯„ä¾‹
class EmotionStreamClient {
    constructor() {
        this.websocket = null;
        this.videoSize = [640, 480]; // é»˜èªå€¼ï¼Œæœƒå‹•æ…‹èª¿æ•´
        this.captureCanvas = null;
        this.captureContext = null;
    }

    async initializeCamera() {
        // è«‹æ±‚æ”å½±æ©Ÿæ¬Šé™
        const stream = await navigator.mediaDevices.getUserMedia({
            video: { width: { ideal: 640 }, height: { ideal: 480 } }
        });

        // å‹•æ…‹ç²å–å¯¦éš›è§£æåº¦
        const videoTrack = stream.getVideoTracks()[0];
        const settings = videoTrack.getSettings();
        this.videoSize = [
            settings.width || 640,
            settings.height || 480
        ];

        console.log('æ”å½±æ©Ÿå¯¦éš›è§£æåº¦:', this.videoSize);

        // å‰µå»ºå‹•æ…‹å°ºå¯¸çš„æ•ç²ç•«å¸ƒ
        this.captureCanvas = document.createElement('canvas');
        this.captureCanvas.width = this.videoSize[0];
        this.captureCanvas.height = this.videoSize[1];
        this.captureContext = this.captureCanvas.getContext('2d');

        // è¨­ç½®videoå…ƒç´ 
        const videoElement = document.createElement('video');
        videoElement.srcObject = stream;
        videoElement.play();

        return videoElement;
    }

    startStreaming(videoElement) {
        // å®šæœŸç™¼é€å½±åƒå¹€
        setInterval(() => {
            if (this.websocket && this.websocket.readyState === WebSocket.OPEN) {
                // ä½¿ç”¨å‹•æ…‹è§£æåº¦æ•ç²å½±åƒ
                this.captureContext.drawImage(videoElement, 0, 0, this.videoSize[0], this.videoSize[1]);
                const imageData = this.captureCanvas.toDataURL('image/jpeg', 0.8);

                const message = {
                    type: 'frame',
                    image: imageData,
                    timestamp: Date.now() / 1000
                };

                this.websocket.send(JSON.stringify(message));
            }
        }, 200); // 5 FPS
    }
}</div>
                </div>
            </div>
        </div>

        <!-- å‹•ä½œæª¢æ¸¬ WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/action</span>
                    <div class="endpoint-description">å‹•ä½œæª¢æ¸¬ç‹€æ…‹å»£æ’­</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>å³æ™‚å»£æ’­å‹•ä½œæª¢æ¸¬éŠæˆ²çš„ç‹€æ…‹æ›´æ–°å’Œçµæœã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ å»£æ’­è¨Šæ¯æ ¼å¼</h3>

                    <div class="message-example">
                        <div class="message-type">éŠæˆ²é–‹å§‹ (Game Start)</div>
                        <pre>{
  "channel": "action",
  "type": "game_start",
  "difficulty": "medium",
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">æª¢æ¸¬çµæœ (Detection Result)</div>
                        <pre>{
  "channel": "action",
  "type": "detection_result",
  "action": "jump",
  "confidence": 0.87,
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">ç‹€æ…‹æ›´æ–° (Status Update)</div>
                        <pre>{
  "channel": "action",
  "type": "status_update",
  "status": "running",
  "current_action": "raise_hand",
  "time_remaining": 45.2,
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‰‹å‹¢è­˜åˆ¥ WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/gesture</span>
                    <div class="endpoint-description">æ‰‹å‹¢è­˜åˆ¥çµæœå»£æ’­</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>å³æ™‚å»£æ’­æ‰‹å‹¢è­˜åˆ¥çµæœå’Œç‹€æ…‹æ›´æ–°ã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ å»£æ’­è¨Šæ¯æ ¼å¼</h3>

                    <div class="message-example">
                        <div class="message-type">æ‰‹å‹¢æª¢æ¸¬ (Gesture Detected)</div>
                        <pre>{
  "channel": "gesture",
  "type": "gesture_detected",
  "gesture": "thumbs_up",
  "confidence": 0.92,
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">ç‹€æ…‹æ›´æ–° (Status Update)</div>
                        <pre>{
  "channel": "gesture",
  "type": "status_update",
  "status": "running",
  "uptime": 30,
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- çŸ³é ­å‰ªåˆ€å¸ƒ WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/rps</span>
                    <div class="endpoint-description">çŸ³é ­å‰ªåˆ€å¸ƒéŠæˆ²ç‹€æ…‹</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>å³æ™‚å»£æ’­çŸ³é ­å‰ªåˆ€å¸ƒéŠæˆ²çš„ç‹€æ…‹å’Œçµæœã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ å»£æ’­è¨Šæ¯æ ¼å¼</h3>

                    <div class="message-example">
                        <div class="message-type">å›åˆçµæœ (Round Result)</div>
                        <pre>{
  "channel": "rps",
  "type": "round_result",
  "player_choice": "rock",
  "ai_choice": "paper",
  "result": "ai_win",
  "scores": {"player": 1, "ai": 2},
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">éŠæˆ²çµæŸ (Game End)</div>
                        <pre>{
  "channel": "rps",
  "type": "game_end",
  "final_scores": {"player": 2, "ai": 3},
  "winner": "ai",
  "duration": 120.5,
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI ç¹ªç•« WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/drawing</span>
                    <div class="endpoint-description">AI ç¹ªç•«æœƒè©±ç‹€æ…‹</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>å³æ™‚å»£æ’­AIç¹ªç•«æœƒè©±çš„ç‹€æ…‹å’Œè­˜åˆ¥çµæœã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ å»£æ’­è¨Šæ¯æ ¼å¼</h3>

                    <div class="message-example">
                        <div class="message-type">ç¹ªç•«è­˜åˆ¥ (Drawing Recognition)</div>
                        <pre>{
  "channel": "drawing",
  "type": "recognition_result",
  "recognized_shape": "circle",
  "confidence": 0.88,
  "bounding_box": [100, 150, 300, 250],
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">æœƒè©±ç‹€æ…‹ (Session Status)</div>
                        <pre>{
  "channel": "drawing",
  "type": "session_status",
  "status": "active",
  "stroke_count": 45,
  "canvas_size": [800, 600],
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‰‹å‹¢ç¹ªç•« WebSocket -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">WS</span>
                    <span class="endpoint-url">/ws/drawing/gesture</span>
                    <div class="endpoint-description">å³æ™‚æ‰‹å‹¢ç¹ªç•«æ§åˆ¶</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <div class="section">
                    <h3>ğŸ“‹ åŠŸèƒ½èªªæ˜</h3>
                    <p>è™•ç†å³æ™‚æ‰‹å‹¢æ§åˆ¶çš„ç¹ªç•«åŠŸèƒ½ï¼Œæ”¯æ´ç©ºä¸­æ‰‹å‹¢ç¹ªç•«ã€é¡è‰²é¸æ“‡å’Œç•«å¸ƒæ¸…ç©ºã€‚</p>
                </div>

                <div class="section">
                    <h3>ğŸ“¤ å®¢æˆ¶ç«¯ç™¼é€è¨Šæ¯</h3>

                    <div class="message-example">
                        <div class="message-type">å•Ÿå‹•æ‰‹å‹¢ç¹ªç•« (Start Gesture Drawing)</div>
                        <pre>{
  "type": "start_gesture_drawing",
  "mode": "gesture_control",
  "color": "blue",
  "canvas_size": [720, 1280],
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">æ”å½±æ©Ÿå¹€ (Camera Frame)</div>
                        <pre>{
  "type": "camera_frame",
  "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ...",
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">åœæ­¢ç¹ªç•« (Stop Drawing)</div>
                        <pre>{
  "type": "stop_drawing",
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>

                <div class="section">
                    <h3>ğŸ“¥ æœå‹™å™¨å›æ‡‰è¨Šæ¯</h3>

                    <div class="message-example">
                        <div class="message-type">ç¹ªç•«é–‹å§‹ç¢ºèª (Drawing Started)</div>
                        <pre>{
  "type": "drawing_started",
  "session_id": "gesture_12345",
  "canvas_size": [720, 1280],
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">æ‰‹å‹¢ç‹€æ…‹æ›´æ–° (Gesture Status)</div>
                        <pre>{
  "type": "gesture_status",
  "current_gesture": "drawing",
  "fingers_up": [false, true, false, false, false],
  "drawing_position": [320, 240],
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">ç•«å¸ƒæ›´æ–° (Canvas Update)</div>
                        <pre>{
  "type": "canvas_update",
  "canvas_base64": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...",
  "stroke_count": 15,
  "current_color": "blue",
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">AIè­˜åˆ¥çµæœ (AI Recognition)</div>
                        <pre>{
  "type": "recognition_result",
  "recognized_shape": "circle",
  "confidence": 0.87,
  "message": "æˆ‘çœ‹åˆ°ä¸€å€‹åœ“å½¢ï¼(éå¸¸ç¢ºå®š)",
  "timestamp": 1640995200.123
}</pre>
                    </div>

                    <div class="message-example">
                        <div class="message-type">éŒ¯èª¤è¨Šæ¯ (Error Message)</div>
                        <pre>{
  "type": "error",
  "message": "MediaPipe åˆå§‹åŒ–å¤±æ•—",
  "error_code": "MEDIA_PIPE_ERROR",
  "timestamp": 1640995200.123
}</pre>
                    </div>
                </div>

                <div class="section">
                    <h3>ğŸ¤ æ‰‹å‹¢èªªæ˜</h3>
                    <table class="table">
                        <tr>
                            <th>æ‰‹å‹¢</th>
                            <th>èªªæ˜</th>
                            <th>å°æ‡‰å‹•ä½œ</th>
                        </tr>
                        <tr>
                            <td><strong>ğŸ‘† é£ŸæŒ‡ä¼¸å‡º</strong></td>
                            <td>åƒ…é£ŸæŒ‡ä¼¸ç›´ï¼Œå…¶ä»–æ‰‹æŒ‡å½æ›²</td>
                            <td>ç¹ªç•«æ¨¡å¼ - ä½¿ç”¨é£ŸæŒ‡å°–ç«¯ç¹ªç•«</td>
                        </tr>
                        <tr>
                            <td><strong>âœŒï¸ é›™æŒ‡ä¼¸å‡º</strong></td>
                            <td>é£ŸæŒ‡å’Œä¸­æŒ‡ä¼¸ç›´</td>
                            <td>é¸æ“‡æ¨¡å¼ - æ©¡çš®æ“¦åŠŸèƒ½</td>
                        </tr>
                        <tr>
                            <td><strong>âœ‹ äº”æŒ‡å…¨é–‹</strong></td>
                            <td>æ‰€æœ‰æ‰‹æŒ‡å®Œå…¨ä¼¸ç›´</td>
                            <td>æ¸…ç©ºæ¨¡å¼ - æ¸…ç©ºæ•´å€‹ç•«å¸ƒ</td>
                        </tr>
                    </table>
                </div>

                <div class="section">
                    <h3>âš™ï¸ æ•ˆèƒ½åƒæ•¸</h3>
                    <table class="table">
                        <tr><th>åƒæ•¸</th><th>å»ºè­°å€¼</th><th>èªªæ˜</th></tr>
                        <tr><td>å¹€ç‡</td><td>20-30 FPS</td><td>å¹³è¡¡å³æ™‚æ€§å’Œè™•ç†æ•ˆèƒ½</td></tr>
                        <tr><td>å½±åƒè§£æåº¦</td><td>å‹•æ…‹é©æ‡‰</td><td>è‡ªå‹•é©æ‡‰æ”å½±æ©Ÿå¯¦éš›è§£æåº¦ (å¦‚ 1920x1080, 1280x720 ç­‰)</td></tr>
                        <tr><td>æ‰‹å‹¢ç©©å®šæ€§</td><td>3å¹€ç¢ºèª</td><td>é¿å…æŠ–å‹•èª¤è§¸</td></tr>
                        <tr><td>ç¶²è·¯å»¶é²</td><td>< 50ms</td><td>ç¢ºä¿å³æ™‚äº’å‹•é«”é©—</td></tr>
                    </table>
                </div>

                <div class="section">
                    <h3>ğŸ’» ä½¿ç”¨ç¯„ä¾‹</h3>
                    <div class="code-block">// JavaScript æ‰‹å‹¢ç¹ªç•«æ•´åˆç¯„ä¾‹
class GestureDrawingClient {
    constructor() {
        this.ws = null;
        this.canvas = document.getElementById('drawing-canvas');
        this.setupWebSocket();
        this.setupCamera();
    }

    setupWebSocket() {
        this.ws = new WebSocket('ws://localhost:8896/ws/drawing/gesture');

        this.ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            this.handleServerMessage(data);
        };
    }

    async startDrawing() {
        // å•Ÿå‹•æ”å½±æ©Ÿ
        const stream = await navigator.mediaDevices.getUserMedia({video: true});
        this.videoElement.srcObject = stream;

        // ç™¼é€å•Ÿå‹•è¨Šæ¯
        this.ws.send(JSON.stringify({
            type: 'start_gesture_drawing',
            mode: 'gesture_control',
            color: 'blue',
            canvas_size: [720, 1280],
            timestamp: Date.now() / 1000
        }));
    }

    handleServerMessage(data) {
        switch(data.type) {
            case 'canvas_update':
                this.updateCanvas(data.canvas_base64);
                break;
            case 'gesture_status':
                this.updateGestureHints(data.current_gesture);
                break;
            case 'recognition_result':
                this.showRecognitionResult(data);
                break;
        }
    }
}</div>
                </div>
            </div>
        </div>

        <!-- é—œé–‰ä»£ç¢¼åƒè€ƒ -->
        <div class="endpoint-card">
            <div class="endpoint-header" onclick="toggleEndpoint(this)">
                <div>
                    <span class="endpoint-method">REF</span>
                    <span class="endpoint-url">WebSocket é—œé–‰ä»£ç¢¼</span>
                    <div class="endpoint-description">æ¨™æº–é—œé–‰ä»£ç¢¼å®šç¾©</div>
                </div>
                <span class="toggle-arrow">â–¶</span>
            </div>
            <div class="endpoint-content">
                <table class="table">
                    <tr>
                        <th>ä»£ç¢¼</th>
                        <th>åç¨±</th>
                        <th>èªªæ˜</th>
                        <th>è§¸ç™¼æ¢ä»¶</th>
                    </tr>
                    <tr>
                        <td><span class="badge badge-success">1000</span></td>
                        <td>CLOSE_NORMAL</td>
                        <td>æ­£å¸¸é—œé–‰</td>
                        <td>å‰ç«¯å‘¼å« close() æˆ–æ­£å¸¸çµæŸ</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-info">1001</span></td>
                        <td>CLOSE_GOING_AWAY</td>
                        <td>ç«¯é»é›¢é–‹</td>
                        <td>é é¢é‡æ–°è¼‰å…¥ã€å°èˆªé›¢é–‹</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-error">1006</span></td>
                        <td>CLOSE_ABNORMAL</td>
                        <td>ç•°å¸¸é—œé–‰</td>
                        <td>ç¶²è·¯ä¸­æ–·ã€ä¼ºæœå™¨å´©æ½°</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-error">1008</span></td>
                        <td>CLOSE_POLICY_VIOLATION</td>
                        <td>é•åæ”¿ç­–</td>
                        <td>è¨Šæ¯æ ¼å¼éŒ¯èª¤ã€ç„¡æ•ˆæ•¸æ“š</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-error">1011</span></td>
                        <td>CLOSE_SERVER_ERROR</td>
                        <td>ä¼ºæœå™¨éŒ¯èª¤</td>
                        <td>å…§éƒ¨è™•ç†éŒ¯èª¤</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
